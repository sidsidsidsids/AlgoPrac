import sys

T = int(sys.stdin.readline().strip())
answers = []
def turn(target, dir):
    C = 1
    if dir == '-':
        C = 3
    if target == 'U':
        for _ in range(C):
            U[0][0], U[0][1], U[0][2], U[1][2], U[2][2], U[2][1], U[2][0], U[1][0] = \
            U[2][0], U[1][0], U[0][0], U[0][1], U[0][2], U[1][2], U[2][2], U[2][1]
            B[2][0], B[2][1], B[2][2], R[0][0], R[1][0], R[2][0], \
            F[0][2], F[0][1], F[0][0], L[2][2], L[1][2], L[0][2] = \
            L[2][2], L[1][2], L[0][2], B[2][0], B[2][1], B[2][2], \
            R[0][0], R[1][0], R[2][0], F[0][2], F[0][1], F[0][0]
    elif target == 'L':
        for _ in range(C):
            L[0][0], L[0][1], L[0][2], L[1][2], L[2][2], L[2][1], L[2][0], L[1][0] = \
            L[2][0], L[1][0], L[0][0], L[0][1], L[0][2], L[1][2], L[2][2], L[2][1]
            U[0][0], U[1][0], U[2][0], F[0][0], F[1][0], F[2][0], \
            D[0][0], D[1][0], D[2][0], B[0][0], B[1][0], B[2][0] = \
            B[0][0], B[1][0], B[2][0], U[0][0], U[1][0], U[2][0], \
            F[0][0], F[1][0], F[2][0], D[0][0], D[1][0], D[2][0]
    elif target == 'F':
        for _ in range(C):
            F[0][0], F[0][1], F[0][2], F[1][2], F[2][2], F[2][1], F[2][0], F[1][0] = \
            F[2][0], F[1][0], F[0][0], F[0][1], F[0][2], F[1][2], F[2][2], F[2][1]
            U[2][0], U[2][1], U[2][2], R[2][0], R[2][1], R[2][2], \
            D[0][2], D[0][1], D[0][0], L[2][0], L[2][1], L[2][2] = \
            L[2][0], L[2][1], L[2][2], U[2][0], U[2][1], U[2][2], \
            R[2][0], R[2][1], R[2][2], D[0][2], D[0][1], D[0][0]
    elif target == 'D':
        for _ in range(C):
            D[0][0], D[0][1], D[0][2], D[1][2], D[2][2], D[2][1], D[2][0], D[1][0] = \
            D[2][0], D[1][0], D[0][0], D[0][1], D[0][2], D[1][2], D[2][2], D[2][1]
            F[2][0], F[2][1], F[2][2], R[2][2], R[1][2], R[0][2], \
            B[0][2], B[0][1], B[0][0], L[0][0], L[1][0], L[2][0] = \
            L[0][0], L[1][0], L[2][0], F[2][0], F[2][1], F[2][2], \
            R[2][2], R[1][2], R[0][2], B[0][2], B[0][1], B[0][0]
    elif target == 'R':
        for _ in range(C):
            R[0][0], R[0][1], R[0][2], R[1][2], R[2][2], R[2][1], R[2][0], R[1][0] = \
            R[2][0], R[1][0], R[0][0], R[0][1], R[0][2], R[1][2], R[2][2], R[2][1]
            U[2][2], U[1][2], U[0][2], B[2][2], B[1][2], B[0][2], \
            D[2][2], D[1][2], D[0][2], F[2][2], F[1][2], F[0][2] = \
            F[2][2], F[1][2], F[0][2], U[2][2], U[1][2], U[0][2], \
            B[2][2], B[1][2], B[0][2], D[2][2], D[1][2], D[0][2]
    elif target == 'B':
        for _ in range(C):
            B[0][0], B[0][1], B[0][2], B[1][2], B[2][2], B[2][1], B[2][0], B[1][0] = \
            B[2][0], B[1][0], B[0][0], B[0][1], B[0][2], B[1][2], B[2][2], B[2][1]
            D[2][0], D[2][1], D[2][2], R[0][2], R[0][1], R[0][0], \
            U[0][2], U[0][1], U[0][0], L[0][2], L[0][1], L[0][0] = \
            L[0][2], L[0][1], L[0][0], D[2][0], D[2][1], D[2][2], \
            R[0][2], R[0][1], R[0][0], U[0][2], U[0][1], U[0][0]
    return
for _ in range(T):
    U = [['w'] * 3 for _ in range(3)]
    D = [['y'] * 3 for _ in range(3)]
    F = [['r'] * 3 for _ in range(3)]
    B = [['o'] * 3 for _ in range(3)]
    L = [['g'] * 3 for _ in range(3)]
    R = [['b'] * 3 for _ in range(3)]
    N = int(sys.stdin.readline().strip())
    orders = list(sys.stdin.readline().strip().split())
    for order in orders:
        turn(order[0], order[1])
    answers.append(U[:])

for t in range(T):
    for elem in answers[t]:
        print(''.join(elem))